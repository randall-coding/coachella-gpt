tools: sys.read, sys.write, search-coachella, sys.http.html2text?, get-spotify-songs
#json_response true args for 
args: bands: A list of bands you like.
json response: true
temperature: 0.2

Perform the following steps in order:

You are a music expert, concert expert, and expert web researcher.

Based on the user input, find bands on coachella's lineup page which the user would like that are playing.  This will include both the specific bands the user mentioned, genres, along with similar artists you suggest.  

If none of the bands are found on the coachella lineup say "Could not find any matches" and list all the args.
  
If you found bands playing next at Coachella (matches.txt) find 3 spotify songs for each artist on that list.  For each band calling get-spotify-songs, wait 1 seconds between spotify api calls for that band.

Return the final output of all the discovered bands + song information bands taken from matches.txt in json format as an array where each object has the following structure { "name": <band name string>, "spotifyUrl": url_value, songs: [{"name": value, "url": song_url_value}] }.

---
name: search-coachella
description: Find bands you might like at coachella
args: bands: A list of bands you like.
#tools: download-coachella-content
tools: sys.http.html2text?, sys.read, sys.write, download-coachella-content, find-similar-bands

Do the following in order:

Write down the input bands you've parsed from the input into input.txt file.

Download the contents of coachella lineup into lineup.txt

Next find bands from the input who are playing along with similar bands which are playing at coachella and write the output into matches.txt.

Return all the bands from matches.txt along with a working link to their spotify page or empty string if you can't find one.

---
name: download-coachella-content
description: Downloads the content of coachella lineup page into file lineup.txt
tools:  sys.http.html2text?, sys.read, sys.write, github.com/gptscript-ai/search/brave

If lineup.txt already exists and is for the upcoming show (today's date is before the concert) then skip running tool and output "OK lineup.txt up to date".  Otherwise...

Search for the upcoming coachella lineup based on a specific year (either this year or next year if we passed it) and find the pitchfork.com page for it.  Search should look like "coachella lineup site:pitchfork.com"

Take that url, visit the page and save all the bands playing at coachella in lineup.txt.  

---
name: find-similar-bands
description: Finds similar bands from concert
args: lineup.txt: Concert band lineup file
args: bands:  A list of bands you like   
tools:  sys.read, sys.write
temperature: 0.5
internal prompt: false 

You are a music expert. You know all abouts bands, music genres and similar bands.  Look through each band/artist in lineup.txt to find all bands in lineup.txt that the user might like based on the "bands" input.  
This will include the specific bands from the input (all of them) as well as several suggestions based on those band preferences or genres (no more than 3 similar bands if you found specific bands, and no more than 5 similar/genre based bands otherwise). 

Write all the bands you find into matches.txt. 

The matches.txt format will have band names separated by newline instead of comman.  

---
name: get-songs-from-artist-url
description: get songs from url of spotify artist
args: url: url towards an artist
tools: github.com/gptscript-ai/search/brave
temperature: 0.2

#!python3 songs.py "$url"

---
name: get-spotify-songs
description: get songs for each artist or band
args: band: a band
args: numberOfSongs: number of songs to obtain per band or artist
tools: ./spotify.yaml
temperature: 0.2

#For all bands in the list find 3 spotify song for each.  Name and url. For each band wait 2 second between each api call.
For the band, find 3 spotify songs.  Name and url.